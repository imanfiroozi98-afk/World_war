<div style="display:flex; gap:20px;">
    <div style="flex:2;">
        <div style="color:#64ffda; font-weight:bold; margin-bottom:10px;">ğŸ’¬ Ú¯ÙØªÚ¯ÙˆÛŒ ØªØ­Ø±ÛŒÙ…</div>
        <div id="sanctionsChat" style="height:300px; overflow-y:auto; background:rgba(0,0,0,0.3); border-radius:16px; padding:10px; margin-bottom:10px;"></div>
        <div style="display:flex; gap:10px;">
            <input type="text" id="sanctionsChatInput" placeholder="Ù¾ÛŒØ§Ù…..." style="flex:1; background:#1e293b; border:1px solid #3b82f6; border-radius:40px; padding:8px 16px;">
            <button onclick="sendSanctionsChat()" style="background:#3b82f6; border:none; border-radius:40px; padding:8px 20px; cursor:pointer;">Ø§Ø±Ø³Ø§Ù„</button>
        </div>
    </div>
    <div style="flex:1; background:rgba(20,30,50,0.6); border-radius:24px; padding:15px;">
        <div style="color:#64ffda; font-weight:bold; margin-bottom:10px;">ğŸ—³ï¸ Ø±Ø£ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ ØªØ­Ø±ÛŒÙ…</div>
        <div id="sanctionDisplay" style="background:#1e293b; border-radius:16px; padding:10px; margin:10px 0; min-height:60px;">${window.sanctionsData?.text || 'Ù‡ÛŒÚ† ØªØ­Ø±ÛŒÙ… ÙØ¹Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯'}</div>
        <button onclick="vote('yes')" style="background:#16a34a; border:none; border-radius:40px; padding:8px; width:100%; margin-bottom:5px; cursor:pointer;">ğŸ‘ YES</button>
        <button onclick="vote('no')" style="background:#b91c1c; border:none; border-radius:40px; padding:8px; width:100%; margin-bottom:5px; cursor:pointer;">ğŸ‘ NO</button>
        <button onclick="refreshSanction()" style="background:#3b82f6; border:none; border-radius:40px; padding:8px; width:100%; cursor:pointer;">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</button>
        <div style="margin-top:15px;">
            <button onclick="showVoteResults()" style="background:#6b7280; border:none; border-radius:40px; padding:8px; width:100%; cursor:pointer;">ğŸ“Š Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬</button>
        </div>
    </div>
</div>

<script>
// Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ­Ø±ÛŒÙ… (Ù…Ø­Ù„ÛŒ)
let sanctionsData = window.sanctionsData || { text: null, votes: { yes: 0, no: 0 }, votedUsers: new Set() };
window.sanctionsData = sanctionsData; // Ø¨Ø±Ø§ÛŒ Ø§Ø´ØªØ±Ø§Ú© Ø¨ÛŒÙ† ØªØ¨â€ŒÙ‡Ø§

function sendSanctionsChat() {
    let input = document.getElementById('sanctionsChatInput');
    let msg = input.value.trim();
    if (!msg) return;
    let chatDiv = document.getElementById('sanctionsChat');
    chatDiv.innerHTML += `<div><b>${window.currentUser}:</b> ${msg}</div>`;
    input.value = '';
    chatDiv.scrollTop = chatDiv.scrollHeight;
}

function publishSanction() {
    let text = document.getElementById('sanctionText')?.value;
    if (!text) return alert('Ù…ØªÙ† ØªØ­Ø±ÛŒÙ… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
    sanctionsData.text = text;
    sanctionsData.votes = { yes:0, no:0 };
    sanctionsData.votedUsers.clear();
    alert(`ØªØ­Ø±ÛŒÙ… "${text}" Ù…Ù†ØªØ´Ø± Ø´Ø¯`);
    let display = document.getElementById('sanctionDisplay');
    if (display) display.innerText = text;
}

function vote(choice) {
    if (sanctionsData.votedUsers.has(window.currentUser)) {
        return alert('Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø±Ø£ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯');
    }
    sanctionsData.votes[choice]++;
    sanctionsData.votedUsers.add(window.currentUser);
    alert(`Ø±Ø£ÛŒ Ø´Ù…Ø§ (${choice}) Ø«Ø¨Øª Ø´Ø¯`);
}

function showVoteResults() {
    alert(`âœ… YES: ${sanctionsData.votes.yes}\nâŒ NO: ${sanctionsData.votes.no}`);
}

function refreshSanction() {
    let display = document.getElementById('sanctionDisplay');
    if (display) display.innerText = sanctionsData.text || 'Ù‡ÛŒÚ† ØªØ­Ø±ÛŒÙ… ÙØ¹Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯';
}

// Ø§Ú¯Ù‡ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø§Ø´ÛŒÙ…ØŒ ÛŒÙ‡ ÙÛŒÙ„Ø¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ…
if (window.currentUser === 'yashar') {
    let container = document.querySelector('#tabContentSanctions .flex-1');
    if (container) {
        let input = document.createElement('input');
        input.id = 'sanctionText';
        input.type = 'text';
        input.placeholder = 'Ù…ØªÙ† ØªØ­Ø±ÛŒÙ…...';
        input.style = 'width:100%; background:#1e293b; border:1px solid #3b82f6; border-radius:40px; padding:8px; margin:10px 0;';
        let btn = document.createElement('button');
        btn.innerText = 'ğŸª§ Ø§Ù†ØªØ´Ø§Ø± ØªØ­Ø±ÛŒÙ…';
        btn.onclick = publishSanction;
        btn.style = 'background:#3b82f6; border:none; border-radius:40px; padding:8px; width:100%; margin-bottom:10px; cursor:pointer;';
        container.insertBefore(btn, container.firstChild);
        container.insertBefore(input, btn);
    }
}
</script>