<div style="padding: 20px;">
    <h2 style="color: #4ade80; margin-bottom: 30px;">๐ฌ ุฏุฑุฎุช ุชฺฉููููฺ</h2>

    <!-- ูพุงู ูููุช -->
    <div id="msgBox" style="color: #4ade80; margin-bottom: 10px; min-height: 24px;"></div>

    <div style="background: #1e293b; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <span style="font-size: 18px;">โ ุณุทุญ ูุธุงู</span>
            <span style="color: #fbbf24; font-size: 20px;" id="milTechLevel">1/5</span>
        </div>
        <div style="color: #94a3b8; margin-bottom: 15px;">ุณูู ูุฏุฑุช: <span id="powerCap">300</span></div>
        <button onclick="upgradeTech('military')" id="milTechBtn" style="background: #2563eb;">ุงุฑุชูุง (ฒฐฐ ุทูุง)</button>
    </div>

    <div style="background: #1e293b; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <span style="font-size: 18px;">๐ข ุชฺฉููููฺ ููุช</span>
            <span style="color: #fbbf24; font-size: 20px;" id="oilTechLevel">1/5</span>
        </div>
        <div style="color: #94a3b8; margin-bottom: 15px;">ุชููุฏ ููุช +ฒฐูช ุฏุฑ ูุฑ ุณุทุญ</div>
        <button onclick="upgradeTech('oil')" id="oilTechBtn" style="background: #2563eb;">ุงุฑุชูุง (ฑตฐ ุทูุง)</button>
    </div>

    <div style="background: #1e293b; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <span style="font-size: 18px;">๐พ ุชฺฉููููฺ ฺฉุดุงูุฑุฒ</span>
            <span style="color: #fbbf24; font-size: 20px;" id="farmTechLevel">1/5</span>
        </div>
        <div style="color: #94a3b8; margin-bottom: 15px;">ุชููุฏ ุบุฐุง +ฒฐูช ุฏุฑ ูุฑ ุณุทุญ</div>
        <button onclick="upgradeTech('farm')" id="farmTechBtn" style="background: #2563eb;">ุงุฑุชูุง (ฑตฐ ุทูุง)</button>
    </div>

    <div style="background: #1e293b; padding: 20px; border-radius: 15px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <span style="font-size: 18px;">๐ญ ุชฺฉููููฺ ุตูุนุช</span>
            <span style="color: #fbbf24; font-size: 20px;" id="indTechLevel">1/5</span>
        </div>
        <div style="color: #94a3b8; margin-bottom: 15px;">ุชููุฏ ุทูุง +ฒฐูช ุฏุฑ ูุฑ ุณุทุญ</div>
        <button onclick="upgradeTech('industry')" id="indTechBtn" style="background: #2563eb;">ุงุฑุชูุง (ฒฐฐ ุทูุง)</button>
    </div>
</div>

<script>
    // ุชุนุฑู ุดุก ุฐุฎุฑูโุณุงุฒ (ุจุง ููุฏุงุฑ ูพุดโูุฑุถ)
    let geoWarSave = {
        resources: { gold: 1000 },
        technology: { military: 1, oil: 1, farm: 1, industry: 1 },
        playerPower: 300
    };

    // ุชูุงุด ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ุงุฒ localStorage
    try {
        const saved = localStorage.getItem('geoWarSave');
        if (saved) {
            const parsed = JSON.parse(saved);
            // ุงุทููุงู ุงุฒ ูุฌูุฏ ุณุงุฎุชุงุฑ ุฏุฑุณุช
            if (parsed.resources && parsed.technology && parsed.playerPower !== undefined) {
                geoWarSave = parsed;
            }
        }
    } catch (e) {
        console.warn('ุฎุทุง ุฏุฑ ุจุงุฑฺฏุฐุงุฑ:', e);
    }

    // ุฐุฎุฑู ุฏุฑ localStorage
    function saveGame() {
        localStorage.setItem('geoWarSave', JSON.stringify(geoWarSave));
    }

    // ููุงุด ูพุงู ูููุช
    function showMessage(text) {
        const box = document.getElementById('msgBox');
        box.textContent = text;
        setTimeout(() => box.textContent = '', 2000);
    }

    // ุจูโุฑูุฒุฑุณุงู ุชูุงู ุงููุงูโูุง ุฑุงุจุท ฺฉุงุฑุจุฑ
    function updateUI() {
        // ุณุทูุญ ุชฺฉููููฺ
        document.getElementById('milTechLevel').textContent = geoWarSave.technology.military + '/5';
        document.getElementById('oilTechLevel').textContent = geoWarSave.technology.oil + '/5';
        document.getElementById('farmTechLevel').textContent = geoWarSave.technology.farm + '/5';
        document.getElementById('indTechLevel').textContent = geoWarSave.technology.industry + '/5';

        // ุณูู ูุฏุฑุช (ุจุฑ ุงุณุงุณ ุณุทุญ ูุธุงู)
        geoWarSave.playerPower = 250 + geoWarSave.technology.military * 50;
        document.getElementById('powerCap').textContent = geoWarSave.playerPower;

        // ุบุฑูุนุงู ฺฉุฑุฏู ุฏฺฉููโูุง ุฏุฑ ุณุทุญ ุญุฏุงฺฉุซุฑ
        document.getElementById('milTechBtn').disabled = geoWarSave.technology.military >= 5;
        document.getElementById('oilTechBtn').disabled = geoWarSave.technology.oil >= 5;
        document.getElementById('farmTechBtn').disabled = geoWarSave.technology.farm >= 5;
        document.getElementById('indTechBtn').disabled = geoWarSave.technology.industry >= 5;
    }

    // ุงุฑุชูุง ุชฺฉููููฺ
    function upgradeTech(type) {
        const costs = { military: 200, oil: 150, farm: 150, industry: 200 };

        // ุจุฑุฑุณ ุญุฏุงฺฉุซุฑ ุณุทุญ
        if (geoWarSave.technology[type] >= 5) {
            showMessage('โ ุญุฏุงฺฉุซุฑ ุณุทุญ!');
            return;
        }

        // ุจุฑุฑุณ ููุงุจุน ฺฉุงู
        if (geoWarSave.resources.gold < costs[type]) {
            showMessage('โ ุทูุง ฺฉุงู ูุณุช!');
            return;
        }

        // ุงุนูุงู ุงุฑุชูุง
        geoWarSave.resources.gold -= costs[type];
        geoWarSave.technology[type]++;

        // ุฐุฎุฑู ู ุจูโุฑูุฒุฑุณุงู
        saveGame();
        updateUI();
        showMessage(`โ ุชฺฉููููฺ ${type} ุงุฑุชูุง ุงูุช!`);
    }

    // ุงุฌุฑุง ุงููู
    window.onload = function() {
        updateUI();
    };
</script>